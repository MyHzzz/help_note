<!DOCTYPE html>

<!-- 
    system控制单独使用
 -->

<html lang="en" controller="AppCtrl"> 
 


<head> 


    <!-- <div include="include/include.html" ></div> -->

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Walker's angular ui-view single page app. ">
    <meta name="Keywords" content="angular ui-view single page">
    <meta name="author" content="Walker">
    <title  >Walker's app</title> 
    <link rel="icon" href="resource/image/hj.png" type="image/x-icon"> 


    <!-- 第三方库引入开始//////////////////////////////////////////////////////////////////////////-->  
    <!-- 样式引入开始 --> 
    <!-- Bootstrap -->
    <link href="include/bootstrap/css/bootstrap.css" rel="stylesheet"> 
    <link href="include/bootstrap/css/bootstrap-datetimepicker.css" rel="stylesheet"> 
    <link href="http://vjs.zencdn.net/5.0.2/video-js.css" rel="stylesheet">
    <!-- 样式引入结束 --> 


    <!-- 引入js文件开始 -->
    <!-- jQuery文件 务必在bootstrap.js 之前引入 -->
    <script src="include/js/jquery-3.2.1.js"></script>
    <!-- Bootstrap -->
    <script src="include/bootstrap/js/bootstrap.js"></script> 
    <script src="include/bootstrap/js/bootstrap-datetimepicker.js"></script> 
 
 
 </head>
 
<body>
    




<div class="container-fluid">
    <div class="row-fluid">
        <div class="span15">
          





<div class="panel-body" style="padding:0px;">
    <h4>
        端口控制
    </h4>
    <table class="table" style="margin-bottom: 0px;" >
            <tr>
                <td> 输出 </td> 
                <td repeat="item in ports.gout" >
                    <button class="port-{{item.value}}" click="clickPort(item)" >{{item.port}}</button> 
                </td>
                        </tr>
                        <tr>
                            <td> 输入 </td> 
                <td repeat="item in ports.gin" >
                    <button class="port-{{item.value}}" >{{item.port}}</button> 
                </td>
            </tr>
    
            <tr>
                <td> 接地 </td> 
                <td repeat="item in ports.gnd" >
                    <button class="port-{{item.value}}"  >{{item.port}}</button> 
                </td>
            </tr> 
    </table>
</div> 


<div class="panel-body" style="padding:0px;">
    <h4>
        行为控制
    </h4>
    <table class="table" style="margin-bottom: 0px;" >
            <tr>
                <td> 摄像头旋转 </td>
                <td><button class="btn" click="clickTurnCamera(0)">左转</button> </td>
                <td><button class="btn" click="clickTurnCamera(2)">复位</button> </td>
                <td><button class="btn" click="clickTurnCamera(1)">右转</button> </td>



            </tr>
            <tr>
                <td> 移动控制 </td> 
                <td><button class="btn" click="clickMove('left')">左转</button> </td>
                <td><button class="btn" click="clickMove('right')">右转</button> </td>
                <td><button class="btn" click="clickMove('head')">前进</button> </td>
                <td><button class="btn" click="clickMove('back')">后退</button> </td>
                <td><button class="btn" click="clickMove('space')">空置</button> </td>
                <td><button class="btn" click="clickMove('stop')">停止</button> </td>
                <td><button class="btn" click="clickMove('faster')">加速</button> </td>
                <td><button class="btn" click="clickMove('slower')">减速</button> </td>
            </tr>
            <tr>
                <td>
                </td>
            </tr>
    </table>
    
<div style="width:100%;height:300px">
    <div style="height:32%;width:100%;text-align: center;">
        <button style="height:100%;width:12%;" class="btn" click="clickMove('faster')">加速</button>
        <button style="height:100%;width:60%;" class="btn" mousedown="clickMove('head')" mouseup="clickMove('space')">前进</button>

        <button style="height:100%;width:12%;" class="btn" click="clickMove('slower')">减速</button>
    </div>

    <div style="height:32%;width:100%;text-align: center;margin:5px 0px;">
        <button style="height:100%;width:32%;" class="btn" mousedown="clickMove('left')" mouseup="clickMove('turnrevert')">左转</button>
        <button style="height:100%;width:14%;" class="btn" click="clickMove('stop')">刹车</button>
        <button style="height:100%;width:14%;"class="btn" click="clickMove('space')">空置</button>
        <button style="height:100%;width:32%;" class="btn" mousedown="clickMove('right')" mouseup="clickMove('turnrevert')">右转</button>                        
    </div>

    <div style="height:32%;width:100%;text-align: center;">
        <button style="height:100%;width:60%;" class="btn" mousedown="clickMove('back')" mouseup="clickMove('space')">后退</button>
    </div>
</div>
    


</div> 



<div class="panel-body" style="padding:0px;">
    <div style="float:left;width:50%;padding:20px 20px 0px 20px;">
        <h4>
            socket.io 写入                    
            <button class="btn" click="clickWrite()">写入</button> 
        </h4>

        <div  style="width:100%;float:left;">
            <textarea style="width:100%;height: 100px;" keydown="keydown($event);" model="taWrite"></textarea>
        </div>
    </div>
    <div style="float:left;width:50%;padding:20px 20px 0px 20px;">
        <h4>
            socket.io 读取
            <button class="btn" click="clickWrite()">读取</button> 
        </h4>

        <div  style="width:100%;float:left;">
            <textarea id="read" style="width:100%;height: 100px;" model="taRead"></textarea>
        </div>
    </div>
</div>


<div class="panel-body" style="padding:0px;">
    <div style="float:left;width:50%;padding:20px 20px 0px 20px; position: relative;">

        监控视频
        <button class="btn" click="clickListen()">开启监控</button> 

        <div  style="width:100%;float:left; background-color: #000000;height: 320px;text-align: center;">
            <!-- <video style="max-width:100%;max-height: 320px;" src="{{video}}" controls="controls">
               您的浏览器不支持 video 标签。
            </video> --> 
            <myvideo   />

        </div>
    </div>
    <div style="float:left;width:50%;padding:20px 20px 0px 20px;position: relative; ">
        <h4>
            抓拍图片
        </h4>

        <div  style="width:100%;float:left; background-color: #000000;height: 320px;text-align: center;" dblclick="dbclick($event);">
            <img style="max-width:100%;max-height: 100%;" src="{{image}}"/>
        </div>
    </div>
</div>



</div></div></div>












<script type="text/javascript">
    

var clickPort = function(item){
        setports(item);
    }
var clickTurnCamera = function(value){
        var params = {'value':value}
        turnCamera(params) ;
    } 
var clickMove = function(value){
        var params = {'value':value}
        move(params);
    } 


var getports = function(params){

        return aja("/do/system/getports/tocken", params);
    };
var setports = function(params){ 
        return aja("/do/system/setports/" + params.port + "-" + (1-params.value));
    };
var turnCamera = function(params){
        return aja("/do/system/cameraTurn/" + params.value);
    };
var move = function(params){ 
        return aja("/do/system/move/" + params.value);
    };

var aja = function(url, params){
        $.ajax({  
            url:url,  
            type:"get",  
            dataType:"json",  
            data:{  
                'params':params  
            },  
            success:function(response){  
  
            },  
            error:function() {  
            }  
        });  
}


</script>



</body>






 </html>
